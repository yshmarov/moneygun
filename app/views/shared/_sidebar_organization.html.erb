<%# Org name banner %>
<div class="px-3 pt-3 pb-1">
  <div class="bg-base-200 rounded-xl p-3 flex items-center gap-3 [[data-expanded=false]_&]:p-2 [[data-expanded=false]_&]:justify-center">
    <%= organization_avatar(Current.organization, classes: "size-8 [[data-expanded=false]_&]:size-6") %>
    <span class="[[data-expanded=false]_&]:hidden truncate text-lg font-bold"><%= Current.organization.name %></span>
  </div>
</div>

<%# Org navigation %>
<nav class="flex-1 overflow-y-auto" aria-label="<%= t("shared.sidebar.org_navigation") %>">
  <ul class="menu [[data-expanded=true]_&]:menu-xl w-full">
    <% tabs = organization_tabs %>
    <% active_tab = organization_active_tab %>

    <% tabs.each do |tab| %>
      <% next if tab[:condition] == false %>
      <% next if tab[:key].in?(%i[members settings billing]) %>

      <%= render_sidebar_tab(tab, active_tab) %>
    <% end %>

    <%# Org management section %>
    <% management_tabs = tabs.select { |tab| tab[:key].in?(%i[members settings billing]) && tab[:condition] != false } %>

    <% if management_tabs.any? %>
      <li class="my-2 border-t border-base-content/10"></li>
      <% management_tabs.each do |tab| %>
        <%= render_sidebar_tab(tab, active_tab) %>
      <% end %>
    <% end %>
  </ul>
</nav>
