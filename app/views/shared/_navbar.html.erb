<nav class="flex justify-between px-4 py-2">
  <div class="flex items-center gap-2">
    <% if signed_in? %>
      <%# Mobile menu button %>
      <button data-action="click->mobile-sidebar#open" class="lg:hidden p-2 -ml-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
      </button>

      <% if current_organization %>
        <%= link_to organization_path(@organization), class: "inline-flex items-center gap-2 no-underline" do %>
          <div>
            <%= organization_avatar(@organization) %>
          </div>
          <div class="truncate">
            <%= @organization.name %>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <%= link_to root_path, class: "no-underline" do %>
        <%= image_tag "logo.png", class: "size-8" %>
      <% end %>
      <%= active_link_to "Pricing", pricing_path, class_active: "bg-gray-300", class: "btn btn-transparent" %>
    <% end %>
  </div>

  <%# auth %>
  <div class="flex items-center gap-2">
    <% if signed_in? %>
      <details class="relative">
        <summary class="inline-block font-semibold text-sm cursor-pointer">
          <%= current_user.email %>
        </summary>
        <div class="absolute right-0 mt-1 bg-white border rounded-lg p-1">
          <%= link_to "Edit Profile", edit_user_registration_path, class: "btn btn-transparent block w-full text-left" %>
          <%= button_to "Log out", destroy_user_session_path, method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "btn btn-transparent block w-full text-left" %>
        </div>
      </details>
    <% else %>
      <%= active_link_to "Log in", new_user_session_path, class_active: "bg-gray-300", class: "btn btn-transparent" %>
      <%= active_link_to "Register", new_user_registration_path, class_active: "bg-gray-300", class: "btn btn-transparent" %>
    <% end %>
  </div>
</nav>
