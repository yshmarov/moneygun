<%= render PageComponent.new(title: t("devise.views.registrations.edit.title", email: resource.email), full_width: false) do %>
  <%= simple_form_for resource, as: resource_name, url: registration_path(resource_name), method: :put, html: { class: "space-y-4" } do |f| %>
    <%= render "shared/errors", object: resource %>

    <%= f.input :email,
                 label: t("devise.views.registrations.edit.email_label"),
                 placeholder: t("devise.views.registrations.edit.email_placeholder"),
                 input_html: {
                   autofocus: true,
                   autocomplete: "email"
                 } %>

    <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
      <div class="alert alert-info text-sm">
        <div>
          <strong>
            <%= t("devise.views.registrations.edit.pending_confirmation", email: resource.unconfirmed_email) %>
          </strong>
        </div>
      </div>
    <% end %>

    <%= f.input :password,
                 label: t("devise.views.registrations.edit.password_label"),
                 placeholder: t("devise.views.registrations.edit.password_placeholder"),
                 hint: [t("devise.views.registrations.edit.password_help"), (@minimum_password_length ? t("devise.views.registrations.edit.password_minimum", count: @minimum_password_length) : nil)].compact.join(" "),
                 input_html: {
                   autocomplete: "new-password"
                 } %>

    <%= f.input :password_confirmation,
                 label: t("devise.views.registrations.edit.password_confirmation_label"),
                 placeholder: t("devise.views.registrations.edit.password_confirmation_placeholder"),
                 input_html: {
                   autocomplete: "new-password"
                 } %>

    <%= f.input :current_password,
                 label: t("devise.views.registrations.edit.current_password_label"),
                 placeholder: t("devise.views.registrations.edit.current_password_placeholder"),
                 hint: t("devise.views.registrations.edit.current_password_help"),
                 input_html: {
                   autocomplete: "current-password"
                 } %>

    <div class="pt-2">
      <%= f.button :submit, t("devise.views.registrations.edit.submit"), class: "btn-primary btn-block" %>
    </div>
  <% end %>

  <div class="pt-6 border-t border-base-content/20">
    <div class="space-y-3">
      <h3 class="font-semibold text-error text-lg">
        <%= t("devise.views.registrations.edit.danger_zone.title") %>
      </h3>

      <p class="text-sm">
        <%= t("devise.views.registrations.edit.danger_zone.description") %>
      </p>

      <div>
        <%= button_to t("devise.views.registrations.edit.danger_zone.button"), registration_path(resource_name),
                      data: { confirm: t("devise.views.registrations.edit.danger_zone.confirm"), turbo_confirm: t("devise.views.registrations.edit.danger_zone.confirm") },
                      method: :delete,
                      class: "btn btn-error btn-outline btn-sm" %>
      </div>
    </div>
  </div>
<% end %>
