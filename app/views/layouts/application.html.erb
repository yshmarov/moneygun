<!DOCTYPE html>

<html lang="<%= I18n.locale %>" class="h-full bg-base-100 text-base-content">
  <head><%= render "layouts/head" %></head>

  <body class="min-h-dvh lg:h-dvh lg:overflow-hidden" <%= "data-native" if hotwire_native_app? %>>
    <%= render "shared/skip_link" %>

    <div class="drawer lg:drawer-open">
      <input id="main-drawer" type="checkbox" class="drawer-toggle">

      <div class="drawer-content flex flex-col min-w-0 min-h-dvh lg:h-dvh lg:overflow-y-auto bg-base-100 lg:bg-base-200">
        <%# Navbar only on mobile - desktop uses sidebar for navigation %>
        <div class="lg:hidden"><%= render "shared/navbar" unless hotwire_native_app? %></div>

        <div class="<%= content_card_classes %>">
          <main id="main-content" class="flex-grow p-4 lg:px-6 min-w-0 overflow-x-hidden"><%= yield %></main>
        </div>

        <div
          id="flash"
          role="log"
          aria-live="polite"
          class="toast toast-end z-40"
        >
          <%= render "shared/flash" %>
        </div>

        <div data-controller="badge" data-badge-count-value="<%= current_user&.unseen_notifications_count.to_i %>" hidden></div>

        <%= render "shared/footer_nav" unless hotwire_native_app? %>
      </div>

      <%= render "shared/sidebar" %>
    </div>

    <%= turbo_frame_tag :modal %>
    <%= render "shared/turbo_confirm_dialog" %>
    <%= turbo_stream_from "notifications_#{current_user.id}" %>
  </body>
</html>
